---
title: 部署个人博客
published: 2025-09-18
tags:
  - 博客
  - Github Pages
lang: zh
pin: 99
abbrlink:  blog-deploy-bygithubpages
---

### 前言

本文将介绍如何部署个人博客到 Github Pages。

### 准备工作

首先，你需要准备以下内容：

1. 一个 Github 账号，如果你没有，请注册一个。
2. 一个 Github 仓库，用来存放你的博客内容, 仓库名必须为 `${username}.github.io`，其中 `${username}` 是你的 Github 用户名。

### 拉取博客主题模板

> 你可以选择使用现成的博客主题模板，也可以自己设计一个。<br>
> 本博客采用的是 `astro-theme-retypeset` 作为基础模板，修改了部分样式和内容，以及增加了分页功能，使页面显示得更美观一些，你可以直接 fork 到你的仓库，或者直接下载到本地做类似的二开。<br>
> 另外，本博客采用的是 Astro 作为静态页面生成器，你可以参考官方文档进行安装和配置。<br>
::github{repo="radishzzz/astro-theme-retypeset"}
```bash
git clone https://github.com/radishzzz/astro-theme-retypeset.git
```
```bash
# 二开了一下，修改了一些样式和内容，增加了分页功能，修改了打包内容，排除了默认的博客内容，example和guides目录下
git clone https://github.com/sansWl/astro-theme-retypeset
```
### 本地配置
**假设你拉取到本地处理**
 1. 安装依赖
```bash
pnpm install
``` 
 2. 本地运行
```bash
pnpm dev
```
> 本地运行后，访问 http://localhost:4321 即可看到博客效果。本地博客文件为 src/content/posts/ 目录下的文件。你可以看到关于博客配置以及主题的配置相关信息。

### 部署到 Github Pages
> 部署到Github Pages，需要的是静态页面，所以需要先生成静态页面，然后再部署到`${username}.github.io` 仓库中。

#### 1. 生成静态页面
> 请在 `content.config.ts` 文件中进行修改，如下：<br>  `loader: glob({ pattern: ['**/*.{md,mdx}', '!examples/**/*', '!guides/**/*'], base: './src/content/posts' }),` 这样打包时就会跳过 `examples` 和 `guides` 目录下的内容。
```bash
# 打包静态页面, 输出到 dist 目录
pnpm build  
```
#### 2. 部署到 Github Pages
> 你可以选择手动部署，也可以使用 Github Action 自动部署。<br>
> **手动部署**：将dist目录下的所有文件上传到`${username}.github.io`仓库的根目录下，然后访问`${username}.github.io`即可看到博客效果。<br>
> **Github Action 自动部署**：本人是博客主题和静态页面部署是分开的，即一份博客主题的fork仓库和>一份 `${username}.github.io` 仓库，博客主题仓库通过 >`Github Action` 自动将打包好的静态页面
>部署到 `${username}.github.io` 仓库中。<br>
> 你也可以放在一起，将静态页面（dist目录下文件）放入一个新分支中，然后将该分支设置为 Github Pages 的发布源。<br>
![](/src/content/posts/_images/dbc4d790-8563-4481-a73e-aad2996f22a9.png)
> 创建workflow工作流需要在仓库根目录下创建一个 `.github/workflows/deploy.yml` 文件，内容如下，以下仅作参考，具体配置请参考官方文档或者使用AI生成：<br>
```yaml
name: Deploy to GitHub Pages

on:
  # 当推送到 main 分支时触发
  push:
    branches:
      - main
  # 允许手动触发 workflow
  workflow_dispatch:

# 设置 GITHUB_TOKEN 的权限
permissions:
  contents: write
  pages: write
  id-token: write

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      # 检出代码
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      # 安装 pnpm
      - name: Install pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 10

      # 设置 Node.js 环境
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: '20'
          cache: 'pnpm'

      # 安装依赖
      - name: Install dependencies
        run: pnpm install

      # 构建项目
      - name: Build project
        run: pnpm build
        
      # 创建 CNAME 文件,如果你想要绑定域名操做，我这里是绑定了一个二级域名
      # 如果没有CNAME文件，Github Pages 会默认使用仓库名作为域名，即配置的域名会失效，需要重新配置
      - name: Create CNAME file
        run: echo "${your-domain}$" > ./dist/CNAME

      # 部署到 ${username}.github.io 仓库
      - name: Deploy to ${username}.github.io
        uses: peaceiris/actions-gh-pages@v4
        with:
          personal_token: ${{ secrets.PERSONAL_TOKEN }}
          external_repository: ${username}/${username}.github.io
          publish_branch: pages  # 发布分支
          publish_dir: ./dist  # 发布目录
          allow_empty_commit: false
          commit_message: 'Deploy from astro-theme-retypeset (${{ github.sha }})'
          full_commit_message: |
            Deploy from astro-theme-retypeset
            
            Triggered by commit ${{ github.sha }} in ${{ github.repository }}
            Author: ${{ github.actor }}
```
#### 3. 工作流问题
> 如果你使用的是 Github Action 自动部署，请注意：<br>
> 请确保你的 Github 账号有足够的权限，可以创建仓库、创建分支、上传文件等操作。<br>
 ![image](https://img2024.cnblogs.com/blog/3426265/202509/3426265-20250920212654418-2118083404.png)

#### 4. 绑定域名
> 如果你有自己的域名，可以将域名绑定到 `${username}.github.io` 仓库中，具体操作请参考[官方文档](https://docs.github.com/zh/pages/configuring-a-custom-domain-for-your-github-pages-site)。<br>
> 以下是我个人，绑定二级域名到Github Pages的步骤：<br>
> 1. 登录自己的域名服务商或者配置了`cloudflare`解析，找到域名管理页面，找到域名解析设置，新增一条记录类型为 `CNAME`，主机记录为 `@`，记录值为 `${username}.github.io`，保存设置。<br>
![CNAME 配置](https://img2024.cnblogs.com/blog/3426265/202509/3426265-20250920212322643-1844562303.png)
> 2. 登录 Github，找到 `${username}.github.io` 仓库，点击 Settings，找到 Pages 部分，将 Custom domain 设置为你的二级域名，点击 Save。<br>
> 3. 等待几分钟，刷新域名解析，如果解析成功，则你的域名应该可以访问到你的博客了。<br>